[[aura-reference-security]]
= Single Sign-On (SSO)
:description: SSO allows you to log in to the Aura Console using their company IdP credentials.

label:AuraDB-Virtual-Dedicated-Cloud[]
label:AuraDS-Enterprise[]
label:AuraDB-Business-Critical[]

== SSO options

*1. Use as a login method for the organization* 

*2. Use as a login method for instances within Projects in this organization:* Note that access is only automatically granted for new database instances created within that project since the setting was enabled. 


== Log-in methods

Organization owners and organization admins can configure a combination of one or more of the log-in methods.

*1. Organization login*

* Email/password
* Okta
* Microsoft Entra ID
* Google SSO (not Google Workspace SSO) 

For *Use as a login method for the organization*, organization admins can disable email/password and Google SSO if at least one other custom SSO provider is configured.

*2. Use as a log-in method for instances within Projects in this organization*

* User/password
* Okta
* Microsoft Entra ID

Enabling *Use as a log-in method for instances within Projects in this organization* locks the user/password method and prevents it from being disabled.

== Setup requirements

Accessing Aura with SSO requires:

* Authorization Code Flow
* A publicly accessible IdP server

To create an SSO Configuration either a Discovery URI or a combination of Issuer, Authorization Endpoint, Token Endpoint and JWKS URI is required.

== Create a new SSO configuration

From the *Organization settings*, go to *Single Sign-On* and use the *SSO Configuration* button to set up a new SSO configuration.

.Organization settings
[.shadow]
image::organizationsettings.png[A screenshot of how to navigate to organization settings in the UI]

The checkboxes *Use as a log in for the Organization* and *Use as login method for instances with projects in this Org* define whether SSO should be only on Organization level, only on Project level, or both.

The required basic SSO configuration information can be retrieved from the IdP.
Entering the Discovery URI pre-fills the fields below. 
If this is not known these fields can be completed manually.

.SSO configuration
[.shadow]
image::sso.png[A screenshot of the SSO configuration dialogue,640,480]

.SSO toggles
[.shadow]
image::ssotoggles.png[A screenshot of the SSO toggles (for password/user and Google social log in) after SSO configuration dialogue,640,480]

== Individual instance level SSO configurations available from Support

Support can assist with:

* Role mapping specific to a database instance
* Custom groups claim besides `groups`
* Updating SSO on already running instances

If you require support assistance, visit link:https://support.neo4j.com/[Customer Support] and raise a support ticket including the following information:


. The _Project ID_ of the projects you want to use SSO for.
See xref:platform/user-management.adoc#_projects[Projects] for more information on how to find your __Project ID__.

. The name of your IdP

== Authorization vs. Authentication

*Authentication* determines who is allowed in. 
Authentication is handled by Single Sign-On (SSO), which serves as a method for logging in. 

*Authorization* determines what someone can do when they have logged-in.
Access privileges beyond login are managed through roles using Role-Based Access Control (RBAC) an authorization method. 

SSO does not directly grant access to edit project settings—such as changing the project name, managing network access, or modifying instance settings like renaming, pausing, or resuming an instance. 
To determine a user’s access rights to these features, you should use RBAC.

Roles and permissions are managed by RBAC, which decides whether a user can access, view, or modify data within the database instances themselves. 
At this level, role mapping can be utilized to grant users different levels of access based on their roles in their Identity Provider (IdP).

=== RBAC determined roles related to SSO

//I don't quite follow this? where are these roles assigned? They are not assigned at SSO config level?//

The following roles can be assigned via invitation:

* Owner
* Admin
* Member

:check-mark: icon:check[]

.Roles
[opts="header",cols="3,1,1,1"]
|===
| Capability
| Owner
| Admin
| Member

| List org
| {check-mark}
| {check-mark}
| {check-mark}

| List org projects
| {check-mark}
| {check-mark}
| {check-mark}

| Update org
| {check-mark}
| {check-mark}
|

| Add projects
| {check-mark}
| {check-mark}
|

| List existing SSO configs
| {check-mark}
| {check-mark}
|

| Add SSO configs
| {check-mark}
| {check-mark}
|

| List SSO configs on project-level
| {check-mark}
| {check-mark}
|

| Update SSO configs on project-level
| {check-mark}
| {check-mark}
|

| Delete SSO configs on project-level
| {check-mark}
| {check-mark}
|

| Invite non-owner users to org
| {check-mark}
| {check-mark}
|

| List users
| {check-mark}
| {check-mark}
|

| List roles
| {check-mark}
| {check-mark}
|

| List members of a project
| {check-mark}
| {check-mark} footnote:[An admin can only list members of projects the admin is also a member of.]
|

// | Add customer information for a trial within org
// | {check-mark}
// | {check-mark}
// |

// | List customer information for a trial within org
// | {check-mark}
// | {check-mark}
// |

// | List seamless login for org
// | {check-mark}
// | {check-mark}
// |

// | Update seamless login for org
// | {check-mark}
// | {check-mark}
// |

| Invite owners to org
| {check-mark}
|
|

| Add owner
| {check-mark}
|
|

| Delete owners
| {check-mark}
|
|

| Transfer projects to and from the org
| {check-mark} footnote:[An owner needs to permission for both the source and destination orgs.]
|
|
|===

Suggestion: An organization's administrator can add Aura as a log-in from a tile in an organization's Apps Dashboard.